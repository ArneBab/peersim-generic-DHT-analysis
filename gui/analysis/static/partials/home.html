<script type="text/ng-template" id="myModalContent.html">
    <div class="modal-header">
        <h3 class="modal-title" id="modal-title">Graph</h3>
    </div>
    <div class="modal-body" id="modal-body">
        <canvas class="chart chart-base" chart-type="$ctrl.graph.type" chart-data="$ctrl.graph.data" chart-labels="$ctrl.graph.labels"
            chart-series="$ctrl.graph.series" chart-options="$ctrl.graph.options">
        </canvas>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" type="button" ng-click="$ctrl.ok()">OK</button>
    </div>
</script>

<h2>Summary</h2>

<div class="row" ng-repeat-start="(variable, groups) in graphs.graphs">
    <h3 class="capitalize">{{variable | prettyName}}</h3>
</div>
<div class="row" ng-repeat-start="(group_name, metrics) in groups">
    <h4>{{group_name | prettyName}}</h4>
</div>
<div class="col-sm-6" ng-repeat="(metric, graph_data) in metrics">
    <canvas class="chart chart-base" chart-type="graph_data.type" chart-data="graph_data.data" chart-labels="graph_data.labels" chart-series="graph_data.series"
        chart-options="graph_data.options" ng-click="open(graph_data)">
    </canvas> 
</div>
<div class="row" ng-repeat-end="">
    <hr />
</div>

<div class="row" ng-repeat-end="">
    <hr />
</div>

<h3>Summary Table</h3>
<div class="row">
    <a target="_blank" href="/api/v1/summary/csv">CSV</a>
    <div class="pre-scrollable">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th ng-repeat="(short_name, path) in summary.headers">{{ short_name }}</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="row in summary.data">
                    <td ng-repeat="(short_name, path) in summary.headers">{{ row[path.group][path.name].value }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<h3>Legend</h3>
<div class="row well">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Short Name</th>
                <th>Full Name</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="(short_name, path) in summary.headers">
                <td>{{ short_name }}</td>
                <td>{{ path.group + ' : ' + path.name | prettyName }}</td>
            </tr>
        </tbody>
    </table>
</div>